<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>In bằng iframe</title>
</head>
<body>
  <button onclick="printContent()">In nội dung</button>

  <script>
    function printContent() {
      // Tạo iframe ẩn
      const iframe = document.createElement('iframe');
      iframe.style.display = 'none';
      document.body.appendChild(iframe);

      const doc = iframe.contentWindow.document;

      // Nội dung HTML sẽ in
      const content = `
        <html>
          <head>
            <title>Print</title>
            <script>
              window.onload = function () {
                setTimeout(function () {
                  window.print();
                  setTimeout(function () {
                    parent.postMessage('close-iframe', '*');
                  }, 1000);
                }, 300);
              };
            <\/script>
          </head>
          <body>
            <h2>Đây là nội dung sẽ được in</h2>
            <p>Chạy tốt trên Safari, iPad, Chrome...</p>
          </body>
        </html>
      `;

      // Ghi nội dung vào iframe
      doc.open();
      doc.write(content);
      doc.close();
    }

    // Nghe tín hiệu từ iframe để xóa nó
    window.addEventListener('message', function (event) {
      if (event.data === 'close-iframe') {
        const iframes = document.querySelectorAll('iframe');
        iframes.forEach(iframe => {
          if (iframe.style.display === 'none') {
            iframe.remove();
          }
        });
      }
    });
  </script>
</body>
</html>
